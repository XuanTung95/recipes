[
  {
    "cmd": [],
    "name": "Checkout flutter/flutter"
  },
  {
    "cmd": [
      "python",
      "-u",
      "RECIPE_MODULE[depot_tools::git]/resources/git_setup.py",
      "--path",
      "[START_DIR]/flutter",
      "--url",
      "https://chromium.googlesource.com/external/github.com/flutter/flutter"
    ],
    "name": "Checkout flutter/flutter.git setup",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "git",
      "fetch",
      "origin",
      "master",
      "--recurse-submodules",
      "--progress",
      "--tags"
    ],
    "cwd": "[START_DIR]/flutter",
    "env": {
      "PATH": "RECIPE_REPO[depot_tools]:<PATH>"
    },
    "infra_step": true,
    "name": "Checkout flutter/flutter.git fetch",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "git",
      "checkout",
      "-f",
      "FETCH_HEAD"
    ],
    "cwd": "[START_DIR]/flutter",
    "infra_step": true,
    "name": "Checkout flutter/flutter.git checkout",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "git",
      "rev-parse",
      "HEAD"
    ],
    "cwd": "[START_DIR]/flutter",
    "infra_step": true,
    "name": "Checkout flutter/flutter.read revision",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@",
      "@@@STEP_TEXT@<br/>checked out 'deadbeef'<br/>@@@",
      "@@@SET_BUILD_PROPERTY@got_revision@\"deadbeef\"@@@"
    ]
  },
  {
    "cmd": [
      "git",
      "clean",
      "-f",
      "-d",
      "-x"
    ],
    "cwd": "[START_DIR]/flutter",
    "infra_step": true,
    "name": "Checkout flutter/flutter.git clean",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "git",
      "submodule",
      "sync"
    ],
    "cwd": "[START_DIR]/flutter",
    "infra_step": true,
    "name": "Checkout flutter/flutter.submodule sync",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "git",
      "submodule",
      "update",
      "--init",
      "--recursive"
    ],
    "cwd": "[START_DIR]/flutter",
    "infra_step": true,
    "name": "Checkout flutter/flutter.submodule update",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "flutter",
      "doctor",
      "-v"
    ],
    "cwd": "[START_DIR]/flutter",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "name": "flutter doctor"
  },
  {
    "cmd": [
      "flutter",
      "update-packages"
    ],
    "cwd": "[START_DIR]/flutter",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "name": "download dependencies"
  },
  {
    "cmd": [],
    "name": "test_execution",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@logcat@@@@",
      "@@@STEP_LOG_END@logcat@@@",
      "@@@STEP_FAILURE@@@"
    ]
  },
  {
    "cmd": [],
    "name": "test_execution.install infra/gcloud",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "vpython",
      "-u",
      "RECIPE_MODULE[recipe_engine::file]/resources/fileutil.py",
      "--json-output",
      "/path/to/tmp/json",
      "ensure-directory",
      "--mode",
      "0777",
      "[CACHE]/cipd/infra/gcloud/version%3A266.0.0.chromium0"
    ],
    "cwd": "[START_DIR]/flutter/dev/integration_tests",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "infra_step": true,
    "name": "test_execution.install infra/gcloud.ensure package directory",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@2@@@"
    ]
  },
  {
    "cmd": [
      "cipd",
      "ensure",
      "-root",
      "[CACHE]/cipd/infra/gcloud/version%3A266.0.0.chromium0",
      "-ensure-file",
      "infra/gcloud/${platform} version:266.0.0.chromium0",
      "-max-threads",
      "0",
      "-json-output",
      "/path/to/tmp/json"
    ],
    "cwd": "[START_DIR]/flutter/dev/integration_tests",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "infra_step": true,
    "name": "test_execution.install infra/gcloud.ensure_installed",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@2@@@",
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"result\": {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"\": [@@@",
      "@@@STEP_LOG_LINE@json.output@      {@@@",
      "@@@STEP_LOG_LINE@json.output@        \"instance_id\": \"resolved-instance_id-of-version:266.0.0.\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"package\": \"infra/gcloud/resolved-platform\"@@@",
      "@@@STEP_LOG_LINE@json.output@      }@@@",
      "@@@STEP_LOG_LINE@json.output@    ]@@@",
      "@@@STEP_LOG_LINE@json.output@  }@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "[CACHE]/cipd/infra/gcloud/version%3A266.0.0.chromium0/lib/gcloud.py",
      "--quiet",
      "config",
      "set",
      "project",
      "flutter-infra"
    ],
    "cwd": "[START_DIR]/flutter/dev/integration_tests",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "name": "test_execution.gcloud --quiet",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "flutter",
      "build",
      "appbundle",
      "--target-platform",
      "android-arm,android-arm64"
    ],
    "cwd": "[START_DIR]/flutter/dev/integration_tests",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "name": "test_execution.Build appbundle",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "[CACHE]/cipd/infra/gcloud/version%3A266.0.0.chromium0/lib/gcloud.py",
      "firebase",
      "test",
      "android",
      "run",
      "--type",
      "robo",
      "--app",
      "build/app/outputs/bundle/release/app-release.aab",
      "--timeout",
      "2m",
      "--results-bucket=gs://flutter_firebase_testlab",
      "--results-dir=None/fake-task-id",
      "--device",
      "model=blueline,version=28",
      "--device",
      "model=flame,version=29",
      "--device",
      "model=griffin,version=24"
    ],
    "cwd": "[START_DIR]/flutter/dev/integration_tests",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "name": "test_execution.gcloud firebase",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@",
      "@@@STEP_FAILURE@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "[CACHE]/cipd/infra/gcloud/version%3A266.0.0.chromium0/lib/gcloud.py",
      "firebase",
      "test",
      "android",
      "run",
      "--type",
      "robo",
      "--app",
      "build/app/outputs/bundle/release/app-release.aab",
      "--timeout",
      "2m",
      "--results-bucket=gs://flutter_firebase_testlab",
      "--results-dir=None/fake-task-id",
      "--device",
      "model=blueline,version=28",
      "--device",
      "model=flame,version=29",
      "--device",
      "model=griffin,version=24"
    ],
    "cwd": "[START_DIR]/flutter/dev/integration_tests",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "name": "test_execution.gcloud firebase (2)",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "flutter",
      "build",
      "apk",
      "--debug",
      "--target-platform",
      "android-x86"
    ],
    "cwd": "[START_DIR]/flutter/dev/integration_tests",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "name": "test_execution.Build apk",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "[CACHE]/cipd/infra/gcloud/version%3A266.0.0.chromium0/lib/gcloud.py",
      "firebase",
      "test",
      "android",
      "run",
      "--type",
      "robo",
      "--app",
      "build/app/outputs/flutter-apk/app-debug.apk",
      "--timeout",
      "2m",
      "--results-bucket=gs://flutter_firebase_testlab",
      "--results-dir=None/fake-task-id",
      "--device",
      "model=Nexus5,version=19",
      "--device",
      "model=Nexus5,version=21",
      "--device",
      "model=Nexus5,version=22",
      "--device",
      "model=Nexus5,version=23",
      "--device",
      "model=Nexus6P,version=25",
      "--device",
      "model=Nexus6P,version=26",
      "--device",
      "model=Nexus6P,version=27",
      "--device",
      "model=NexusLowRes,version=30"
    ],
    "cwd": "[START_DIR]/flutter/dev/integration_tests",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "name": "test_execution.gcloud firebase (3)",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [],
    "name": "test_execution.install infra/gsutil",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "vpython",
      "-u",
      "RECIPE_MODULE[recipe_engine::file]/resources/fileutil.py",
      "--json-output",
      "/path/to/tmp/json",
      "ensure-directory",
      "--mode",
      "0777",
      "[CACHE]/cipd/infra/gsutil/version%3A4.41"
    ],
    "cwd": "[START_DIR]/flutter/dev/integration_tests",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "infra_step": true,
    "name": "test_execution.install infra/gsutil.ensure package directory",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@2@@@"
    ]
  },
  {
    "cmd": [
      "cipd",
      "ensure",
      "-root",
      "[CACHE]/cipd/infra/gsutil/version%3A4.41",
      "-ensure-file",
      "infra/gsutil version:4.41",
      "-max-threads",
      "0",
      "-json-output",
      "/path/to/tmp/json"
    ],
    "cwd": "[START_DIR]/flutter/dev/integration_tests",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "infra_step": true,
    "name": "test_execution.install infra/gsutil.ensure_installed",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@2@@@",
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"result\": {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"\": [@@@",
      "@@@STEP_LOG_LINE@json.output@      {@@@",
      "@@@STEP_LOG_LINE@json.output@        \"instance_id\": \"resolved-instance_id-of-version:4.41----\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"package\": \"infra/gsutil\"@@@",
      "@@@STEP_LOG_LINE@json.output@      }@@@",
      "@@@STEP_LOG_LINE@json.output@    ]@@@",
      "@@@STEP_LOG_LINE@json.output@  }@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@"
    ]
  },
  {
    "cmd": [
      "vpython",
      "-vpython-spec",
      "RECIPE_MODULE[fuchsia::gsutil]/resources/gsutil.vpython",
      "-u",
      "[CACHE]/cipd/infra/gsutil/version%3A4.41/gsutil",
      "-o",
      "GSUtil:software_update_check_period=0",
      "cp",
      "gs://flutter_firebase_testlab/None/fake-task-id/*/logcat",
      "[CLEANUP]"
    ],
    "cwd": "[START_DIR]/flutter/dev/integration_tests",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "infra_step": true,
    "name": "test_execution.gsutil cp",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@"
    ]
  },
  {
    "cmd": [
      "vpython",
      "-u",
      "RECIPE_MODULE[recipe_engine::file]/resources/fileutil.py",
      "--json-output",
      "/path/to/tmp/json",
      "copy",
      "[CLEANUP]/logcat",
      "/path/to/tmp/"
    ],
    "cwd": "[START_DIR]/flutter/dev/integration_tests",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "infra_step": true,
    "name": "test_execution.read",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@",
      "@@@STEP_LOG_END@logcat@@@"
    ]
  },
  {
    "cmd": [
      "grep",
      "E/flutter",
      "[CLEANUP]/logcat"
    ],
    "cwd": "[START_DIR]/flutter/dev/integration_tests",
    "env": {
      "DEPOT_TOOLS": "RECIPE_REPO[depot_tools]",
      "LUCI_BRANCH": "",
      "LUCI_CI": "True",
      "LUCI_PR": "",
      "OS": "linux",
      "PUB_CACHE": "[START_DIR]/.pub-cache",
      "SDK_CHECKOUT_PATH": "[START_DIR]/flutter"
    },
    "env_prefixes": {
      "PATH": [
        "[START_DIR]/flutter/bin",
        "[START_DIR]/flutter/bin/cache/dart-sdk/bin"
      ]
    },
    "name": "test_execution.analyze_logcat",
    "~followup_annotations": [
      "@@@STEP_NEST_LEVEL@1@@@",
      "@@@STEP_FAILURE@@@"
    ]
  },
  {
    "failure": {
      "failure": {},
      "humanReason": "Step('test_execution.analyze_logcat') (retcode: 0)"
    },
    "name": "$result"
  }
]